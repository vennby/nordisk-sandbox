<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SpecAI â€“ Draft Study Specifications</title>
    <link rel="icon" href="static/images/logo.png" />
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <body class="bg-gray-50 text-gray-900 font-sans">
    <header class="bg-white shadow-sm fixed top-0 left-0 w-full z-50">
      <div
        class="max-w-7xl mx-auto px-6 py-4 flex justify-between items-center"
      >
        <!-- Logo + Title -->
        <div class="flex items-center space-x-2">
          <img
            src="{{ url_for('static', filename='images/logo.png') }}"
            alt="SpecAI Logo"
            class="h-10 w-10"
          />
          <h1 class="text-2xl font-bold text-indigo-600">SpecAI</h1>
        </div>

        <!-- Navigation -->
        <nav class="space-x-6 hidden md:flex">
          <a href="/dashboard" class="hover:text-indigo-600">Dashboard</a>
          <a href="/main" class="text-indigo-600 font-semibold">Generate</a>
          <a href="/logout" class="hover:text-indigo-600">Logout</a>
        </nav>
      </div>
    </header>

    <!-- Main Section -->
    <section class="pt-32 pb-20 max-w-6xl mx-auto px-6">
      <h2 class="text-3xl font-bold mb-6 text-gray-800 text-center">
        Generate Draft Study Specifications
      </h2>

      <!-- Upload Box -->
      <div class="bg-white rounded-2xl shadow-md p-8 mb-12 text-center">
        <form
          action="/process"
          method="POST"
          enctype="multipart/form-data"
          class="space-y-6"
        >
          <label class="block">
            <span class="text-gray-700 font-medium"
              >Upload Clinical Trial PDF</span
            >
            <input
              type="file"
              name="pdf_file"
              accept="application/pdf"
              class="mt-2 block w-full text-sm text-gray-600 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-600 hover:file:bg-indigo-100"
              required
            />
          </label>
          <button
            type="submit"
            class="bg-indigo-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-indigo-700 transition"
          >
            Extract Specifications
          </button>
        </form>
      </div>

      <!-- Extraction Results -->
      {% if specs %}
      <div class="bg-white rounded-2xl shadow-md p-8">
        <h3 class="text-2xl font-bold text-indigo-600 mb-6">
          Extracted Study Specifications
        </h3>
        <div class="grid md:grid-cols-2 gap-8 text-left">
          <div>
            <h4 class="text-lg font-semibold mb-2">Endpoints</h4>
            <ul class="list-disc list-inside text-gray-700">
              {% for endpoint in specs.endpoints %}
              <li>{{ endpoint }}</li>
              {% endfor %}
            </ul>
          </div>
          <div>
            <h4 class="text-lg font-semibold mb-2">Eligibility Criteria</h4>
            <ul class="list-disc list-inside text-gray-700">
              {% for criterion in specs.eligibility %}
              <li>{{ criterion }}</li>
              {% endfor %}
            </ul>
          </div>
          <div>
            <h4 class="text-lg font-semibold mb-2">Study Parameters</h4>
            <ul class="list-disc list-inside text-gray-700">
              {% for param in specs.parameters %}
              <li>{{ param }}</li>
              {% endfor %}
            </ul>
          </div>
        </div>

        <div class="mt-8 text-center">
          <a
            href="/download/{{ specs.id }}"
            class="bg-purple-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-purple-700 transition"
            >Download Draft Specs</a
          >
        </div>
      </div>
      {% elif error %}
      <div class="bg-red-50 border border-red-200 text-red-700 p-6 rounded-xl">
        <p><strong>Error:</strong> {{ error }}</p>
      </div>
      {% endif %}
    </section>

    <!-- Footer -->
    <footer class="bg-gray-900 text-gray-400 py-10 mt-10">
      <div
        class="max-w-6xl mx-auto px-6 flex flex-col md:flex-row justify-center"
      >
        <p>&copy; 2025 SpecAI. All rights reserved.</p>
        <div class="space-x-6 mt-4 md:mt-0"></div>
      </div>
    </footer>
  </body>
</html>
